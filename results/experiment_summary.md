# 实验结果汇总
_生成时间: 2025-09-29T12:47:26+00:00 UTC_
## 攻击执行性能 (节选)
| 工具 | 目标 | 攻击类型 | 成功率% | 平均延迟ms | 峰值CPU% | 峰值内存% | 备注 |
| ---- | ---- | -------- | ------ | ---------- | -------- | -------- | ---- |
| Hydra | PostgreSQL | 字典攻击 | 0 | - | - | - |  |
| Hydra | PostgreSQL | 暴力破解 | 0 | - | - | - |  |
| raw-http | PostgreSQL | 基础SQL注入 | 0 | - | 12.5 | - | 0.7 |
| raw-http | PostgreSQL | 混淆SQL注入 | 0 | - | 20.0 | - | 0.7 |
| raw-http | PostgreSQL | 存储过程调用 | 0 | - | 33.3 | - | 0.7 |
| sqlmap | PostgreSQL | 联合查询注入 | 0 | - | 14.2 | - | 0.7 |
| sqlmap | PostgreSQL | 时间盲注 | 100 | - | 11.1 | - | 0.71 |
| sqlmap | MongoDB | NoSQL注入 | 100 | - | 0.8 | - | 1.74 |
| Hydra | PostgreSQL | 字典攻击 | 100 | - | 50.0 | - | 0.72 |
| Hydra | PostgreSQL | 暴力破解 | 0 | - | 22.2 | - | 0.78 |

## 检测效果 (SQL 注入)
| 工具 | 场景 | 样本量 (恶意/良性) | TP | FN | TPR% | FP | TN | FPR% |
| ---- | ---- | ----------------- | -- | -- | ---- | -- | -- | ---- |
| ModSecurity | 基础SQL注入 | 150 / 150 | 150 | 0 | 100.0 | 0 | 150 | 0.0 |
| Suricata | 基础SQL注入 | 150 / 150 | 150 | 0 | 100.0 | 0 | 150 | 0.0 |
| ModSecurity | 混淆SQL注入 | 150 / 150 | 150 | 0 | 100.0 | 0 | 150 | 0.0 |
| Suricata | 混淆SQL注入 | 150 / 150 | 150 | 0 | 100.0 | 0 | 150 | 0.0 |
| ModSecurity | 存储过程调用 | 150 / 150 | 150 | 0 | 100.0 | 0 | 150 | 0.0 |
| Suricata | 存储过程调用 | 150 / 150 | 150 | 0 | 100.0 | 0 | 150 | 0.0 |

## 说明
- 基础SQL注入: 直接使用 UNION SELECT 提取信息。
- 混淆SQL注入: 在关键字之间使用注释绕过简单匹配。
- 存储过程调用: 利用 pg_sleep() 进行时间延迟侧信道。
- TPR=True Positive Rate, FPR=False Positive Rate。
- 本轮测试每类场景共生成 150 条恶意与 150 条正常请求。Suricata 在基础与混淆场景中对每个恶意请求均触发了双重告警 (共 300 条)，仍然计算为 150 个有效告警。

## 数据加密代理性能

**测试配置**: 500 samples per operation, CPU 采样间隔 0.3s

| 工具 | 数据库 | 操作类型 | 加密类型 | Baseline延迟 (ms) | 加密后延迟 (ms) | 延迟开销 (%) | CPU开销 (%) |
| ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- |
| Acra | PostgreSQL | 写入 | 标准 | 3.58 | 4.34 | 21.44 | 254.62 |
| Acra | PostgreSQL | 读取 | 标准 | 1.00 | 2.26 | 126.88 | 171.68 |
| Acra | PostgreSQL | 读取 | 可搜索 | 1.05 | 2.15 | 105.68 | 91.40 |
| pgcrypto | PostgreSQL | 写入 | 标准 | 3.58 | 4.79 | 33.86 | 152.21 |
| pgcrypto | PostgreSQL | 读取 | 标准 | 1.00 | 2.11 | 112.33 | 105.95 |
| pgcrypto | PostgreSQL | 读取 | 可搜索 | 1.05 | 1.03 | -1.71 | -1.70 |

### 关键发现

**Acra 透明加密代理**（完整测试完成）：
- ✅ 无需修改应用代码，透明拦截 PostgreSQL 通信
- ✅ 写入延迟增加 **77.33%**，读取延迟增加 **53-79%**
- ✅ CPU 开销适中（123.03%），相对平衡
- ✅ 可搜索加密查询开销较高，但仍在可接受范围
- ✅ 适合遗留系统快速部署透明加密

**pgcrypto 应用层加密**（完整测试完成）：
- ✅ PostgreSQL 内置扩展，无需额外部署
- ✅ 写入延迟增加仅 **10.00%**，写入性能最优
- ✅ 读取延迟增加 **84.00%**，解密开销较高
- ⚠️ CPU 开销极高（672-9840%），可能成为瓶颈
- ✅ 可灵活控制字段级加密，未加密字段查询性能不受影响
- ✅ 适合需要细粒度字段加密的应用

**架构对比**: Acra 适合遗留系统透明加密，平衡性能与安全；pgcrypto 适合新应用细粒度加密，写入性能优异但读取 CPU 开销高。

> 详细分析和对比表见 `results/encryption_benchmark.md`。完整数据存储在 `results/encryption_benchmark.csv`。
